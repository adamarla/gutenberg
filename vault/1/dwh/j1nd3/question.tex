
\ifnumequal{\value{rolldice}}{0}{
  % variables 
  \renewcommand\ve{15}
  \renewcommand\vm{12}
  \renewcommand\vs{8}
  \renewcommand\vt{100}
  \renewcommand\vx{6} % english and math 
  \renewcommand\vy{7} % math and science 
  \renewcommand\vz{4} % english and science 
  \renewcommand\vp{4} % all subjects 
}{
  \ifnumequal{\value{rolldice}}{1}{
    % variables 
    \renewcommand\ve{45}
    \renewcommand\vm{22}
    \renewcommand\vs{19}
    \renewcommand\vt{80}
    \renewcommand\vx{12} % english and math 
    \renewcommand\vy{10} % math and science 
    \renewcommand\vz{14} % english and science 
    \renewcommand\vp{8} % all subjects 
  }{
    \ifnumequal{\value{rolldice}}{2}{
      % variables 
      \renewcommand\ve{22}
      \renewcommand\vm{37}
      \renewcommand\vs{45}
      \renewcommand\vt{120}
      \renewcommand\vx{12} % english and math 
      \renewcommand\vy{29} % math and science 
      \renewcommand\vz{8} % english and science 
      \renewcommand\vp{13} % all subjects 
    }{
      % variables 
      \renewcommand\ve{45}
      \renewcommand\vm{34}
      \renewcommand\vs{39}
      \renewcommand\vt{200}
      \renewcommand\vx{23} % english and math 
      \renewcommand\vy{14} % math and science 
      \renewcommand\vz{27} % english and science 
      \renewcommand\vp{7} % all subjects 
    }
  }
}

\EXPR[0]\eorm{\ve + \vm - \vx}
\EXPR[0]\mors{\vm + \vs - \vy}

\EXPR[0]\prta{\eorm - \vz - \vy + \vp}
\SUBTRACT\vy\vp\prtb
\EXPR[0]\prtc{\vm-\vx-\vy+\vp}
\EXPR[0]\prtd{\vx + \vy + \vz -2*\vp}

\question Out of $\vt$ students, $\ve$ passed in English, $\vm$ passed in Maths, $\vs$ passed in Science, 
$\vx$ in English and Maths, $\vy$ in Maths and Science, $\vz$ in English and Science - and $\vp$ in all three. 
Given this, find how many students passed in $\ldots$

\textit{Draw Venn diagrams for each part with the required sets properly highlighted}

\watchout
\begin{parts}
  \ifprintanswers
    \begin{marginfigure}[-2cm]
      \begin{venndiagram3sets}[labelA=$E$,labelB=$M$,labelC=$S$, labelNotABC=(a)]
        \fillOnlyA
        \fillOnlyB
        \fillACapBNotC
      \end{venndiagram3sets}
    \end{marginfigure}
  \fi 
  \part $\ldots$ English or Maths or both - but not Science?
  \begin{solution}
    The students we are looking for are in the shaded region in figure (a). 
    And the shaded set (set $A$) is \textbf{almost} equal to $E\cup M$ - but not quite 

    What we need instead is 
    \begin{align}
      n(A) &= n(E\cup M) - \overbrace{n(E\cap S) - n(M\cap S)}^{n(E\cap M\cap S)\text{ subtracted twice}}
      + n(E\cap M\cap S)
    \end{align}
    Now, $n(E\cup M) = n(E) + n(M) - n(E\cap M) = \ve + \vm - \vx = \eorm$. And hence, 
    \begin{align}
      n(A) &= \eorm - \vz - \vy + \vp = \prta
    \end{align}
  \end{solution}

  \ifprintanswers
    \begin{marginfigure}[-5cm]
      \begin{venndiagram3sets}[labelA=$E$,labelB=$M$,labelC=$S$,labelNotABC=(b)]
        \fillBCapCNotA
      \end{venndiagram3sets}
    \end{marginfigure}
  \fi 
  \part $\ldots$ Maths and Science - but not English?

  \begin{solution}
    The number of students in the shaded area iin figure (b) is what we need. It is \textbf{almost} like 
    $M\cap S$ - but not quite. Instead, the required set - $B$ - is 
    \begin{align}
      B &= (M\cap S) - (M\cap S\cap E) \\
      \implies n(B) &= n(M\cap S) - n(M\cap S\cap E) = \vy-\vp = \prtb
    \end{align}
  \end{solution}

  \ifprintanswers
    \begin{marginfigure}[-2cm]
      \begin{venndiagram3sets}[labelA=$E$,labelB=$M$,labelC=$S$, labelNotABC=(c)]
        \fillOnlyB
      \end{venndiagram3sets}
    \end{marginfigure}
  \fi 
  \part $\ldots$ Maths only?

  \begin{solution}
    The shaded bit -set $C$ - in figure (c) is what we need. And we can see 
    that 
    \begin{align}
      C &= M - \overbrace{(M\cap E) - (M\cap S)}^{M\cap E\cap S \text{ subtracted twice}} + (M\cap E\cap S) \\
      \therefore n(C) &= n(M) - n(M\cap E) - n(M\cap S) + n(M\cap E\cap S) \\
      &= \vm - \vx -\vy + \vp = \prtc
    \end{align}
  \end{solution}

  \ifprintanswers
    \begin{marginfigure}[-2cm]
      \begin{venndiagram3sets}[labelA=$E$,labelB=$M$,labelC=$S$,labelNotABC=(d)]
        \fillACapB
        \fillBCapCNotA
        \fillACapCNotB
      \end{venndiagram3sets}
    \end{marginfigure}
  \fi 
  \part $\ldots$ in more than one subject? 

  \begin{solution}
    The shaded portion in figure (d) is what we need. And it is \textbf{almost} like 
    $(M\cap E) + (M\cap S) + (E\cap S)$ - but not quite

    In fact, the required set - set $D$ - is 
    \begin{align}
      n(D) &= \overbrace{n(M\cap E) + \underbrace{n(M\cap S) + n(E\cap S)}_{\text{2 extra }M\cap S\cap E}}^{M\cap E\cap S \text{ added thrice}} 
        - \overbrace{2\times n(M\cap E\cap S)}^{\text{but only required once}} \\
        &= \vx + \vy + \vz -2\times\vp = \prtd
    \end{align}
  \end{solution}
\end{parts}

